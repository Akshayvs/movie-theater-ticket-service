<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>App.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">movie-theater-ticket-service</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">App.java</span></div><h1>App.java</h1><pre class="source lang-java linenums">/**
 * Created by asonawane on 11/4/17.
 */

import java.util.Arrays;
import java.util.Scanner;

<span class="nc" id="L8">public class App {</span>
    private static TicketService server;

    public static void main(String args[]) {

<span class="nc" id="L13">        server = new TicketServer();</span>
<span class="nc" id="L14">        printDefaultInstructions();</span>
<span class="nc" id="L15">        navigation();</span>
<span class="nc" id="L16">    }</span>

    private static void printDefaultInstructions() {
<span class="nc" id="L19">        System.out.println();</span>
<span class="nc" id="L20">        System.out.println(&quot; Please provide a numeric input to perform one of the actions&quot;);</span>
<span class="nc" id="L21">        System.out.println(&quot; [ 1 ] for remaining seats&quot;);</span>
<span class="nc" id="L22">        System.out.println(&quot; [ 2 ] for reserve seats&quot;);</span>
<span class="nc" id="L23">        System.out.println(&quot; [ 3 ] for book seats&quot;);</span>
<span class="nc" id="L24">        System.out.println(&quot; To Exit, press any other key&quot;);</span>
<span class="nc" id="L25">    }</span>

    private static void navigation() {
<span class="nc" id="L28">        Scanner scr = new Scanner(System.in);</span>

        try {
            while (true) {
<span class="nc" id="L32">                String value = scr.nextLine();</span>
<span class="nc bnc" id="L33" title="All 2 branches missed.">                if (value.equals(&quot;1&quot;)) {</span>
                    //REMAINING SEATS
<span class="nc" id="L35">                    System.out.println(&quot;Reamining Seats  : &quot; + server.totalAvailableSeats());</span>

<span class="nc bnc" id="L37" title="All 2 branches missed.">                } else if (value.equals(&quot;2&quot;)) {</span>
                    //HOLD SEATS
                    int requestedSeats;
                    int seatCount;
                    int[][] seats;
                    String clientEmail;


<span class="nc" id="L45">                    System.out.println(&quot; Hold Seats : You can reserve upto &quot; + server.totalAvailableSeats() + &quot; seats&quot;);</span>
<span class="nc" id="L46">                    System.out.println(&quot; How many seats ? &quot;);</span>
<span class="nc" id="L47">                    requestedSeats = scr.nextInt();</span>

<span class="nc" id="L49">                    System.out.println(&quot; What is your email ? &quot;);</span>
<span class="nc" id="L50">                    clientEmail = scr.next();</span>
                    // todo : regex check for email address validation and error handling.

<span class="nc" id="L53">                    SeatHold reservation = server.findAndHoldSeats(requestedSeats, clientEmail);</span>
<span class="nc" id="L54">                    seatCount = reservation.getNumberOfSeats();</span>

                    // A negative seatCount signifies the actual remainig seat count

<span class="nc bnc" id="L58" title="All 2 branches missed.">                    if (seatCount &gt; 0) {</span>
<span class="nc" id="L59">                        System.out.println(&quot;Following &quot; + seatCount + &quot;seats have been reserved : &quot;);</span>
<span class="nc" id="L60">                        seats = reservation.getSeatsOnHold();</span>

<span class="nc bnc" id="L62" title="All 2 branches missed.">                        for (int[] seat : seats) {</span>
<span class="nc" id="L63">                            System.out.print(Arrays.toString(seat));</span>
<span class="nc" id="L64">                            System.out.print(&quot;  &quot;);</span>
                        }

<span class="nc" id="L67">                        System.out.println();</span>
<span class="nc" id="L68">                        System.out.println(&quot;Your Reservation ID  : &quot; + reservation.getSeatHoldId());</span>
<span class="nc" id="L69">                        scr.nextLine();</span>
                    } else {
<span class="nc" id="L71">                        System.out.println(&quot; We cannot complete your request. We can provide only &quot; + seatCount * -1 + &quot; seats&quot;);</span>
<span class="nc" id="L72">                        scr.nextLine();</span>
                    }
<span class="nc bnc" id="L74" title="All 2 branches missed.">                } else if (value.equals(&quot;3&quot;)) {</span>
                    // RESERVE
                    int seatHoldId;
                    String email;

<span class="nc" id="L79">                    System.out.println(&quot; Reserve Seats : &quot;);</span>
<span class="nc" id="L80">                    System.out.println(&quot;What is your seat hold id ???&quot;);</span>
<span class="nc" id="L81">                    seatHoldId = scr.nextInt();</span>
<span class="nc" id="L82">                    System.out.println(&quot; What is your email ? &quot;);</span>
<span class="nc" id="L83">                    email = scr.next();</span>
                    // todo : logic to confirm of the email and the seatHold id match
                    // todo : if match -&gt; proceed; else -&gt; error handling


<span class="nc" id="L88">                    String response = server.reserveSeats(seatHoldId, email);</span>
<span class="nc" id="L89">                    System.out.println(&quot;Response : &quot; + response);</span>

<span class="nc" id="L91">                    scr.nextLine();</span>
<span class="nc" id="L92">                } else {</span>
                    //Invalid Input Handler
                    while (true) {
<span class="nc" id="L95">                        System.out.println(&quot; Are you sure you want to Quit ? Y / N&quot;);</span>
<span class="nc" id="L96">                        String answer = scr.nextLine().trim().toLowerCase();</span>
<span class="nc bnc" id="L97" title="All 4 branches missed.">                        if (answer.equals(&quot;y&quot;) || answer.equals(&quot;yes&quot;)) {</span>
<span class="nc" id="L98">                            System.out.println(&quot; Goodbye !&quot;);</span>
<span class="nc" id="L99">                            scr.close();</span>
<span class="nc" id="L100">                            System.exit(0);</span>

<span class="nc bnc" id="L102" title="All 4 branches missed.">                        } else if (answer.equals(&quot;n&quot;) || answer.equals(&quot;no&quot;)) {</span>
<span class="nc" id="L103">                            System.out.println(&quot;GREAT, Lets continue !!&quot;);</span>
<span class="nc" id="L104">                            printDefaultInstructions();</span>
<span class="nc" id="L105">                            break;</span>
                        }
<span class="nc" id="L107">                    }</span>
                }
<span class="nc" id="L109">            }</span>

<span class="nc" id="L111">        } catch (Exception e) {</span>
<span class="nc" id="L112">            System.out.println(&quot;Invalid Input Detected  - &gt;  &quot; + e);</span>
<span class="nc" id="L113">            System.out.println();</span>
<span class="nc" id="L114">            printDefaultInstructions();</span>
<span class="nc" id="L115">            navigation();</span>
        }
<span class="nc" id="L117">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>